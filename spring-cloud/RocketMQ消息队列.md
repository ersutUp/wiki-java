# RocketMQ消息队列



## 三大核心组件

### NameServer：注册中心

- Broker的注册中心
- 管理Broker的信息，并提供心跳机制金策是否存活。
- 客户端通过NameServer查找**Broker**

### Broker：消息存储

- 接收生产者消息，并持久化消息
- 推送消息给消费者
- 根据主题（TOPIC）和队列（QUEUE）组织数据
- 支持集群
  - **多主模式**：多个主节点进行集群
    - 优点：部署简单
    - 缺点：宕机的节点在恢复前不可订阅，消息实时性会受到影响。
  - **多主从复制（异步复制）模式**：每个主节点带从节点
    - 优点：主节点宕机后，消费者仍然可以从Slave消费，而且此过程对应用透明，不需要人工干预，性能同多Master模式几乎一样。主节点宕机后**从节点替换为主节点**（4.5后支持自动切换）
    - 缺点：Master宕机，磁盘损坏情况下会丢失少量消息。

### Proxy：消息代理层

>  5.0版本后支持

把Broker职责拆分到Proxy，Broker专注于存储。



Proxy支持

- 提供负载均衡
- 访问控制
- 协议适配（MQTT等）
- 等....



# 领域模型